2007-08-05  Doug Hellmann  <doug.hellmann@gmail.com>

	* feedcache/storagebase.py (StorageBase.get): Merge getContent and
	getModifiedTime into a single method, get, to avoid race
	conditions between checking the time and using the data.

	* feedcache/test_shelvestorage.py (ShelveStorageCacheTest): Add a
	few integration tests using ShelveStorage with the Cache.

	* feedcache/shelvestorage.py: Check that the storage is open
	before allowing the caller to use it.  Handle KeyError exceptions
	by returning None.

	* feedcache/example.py (main): Simple example program that uses
	the feed cache to retrieve feed data and print out the titles.

2007-08-04  Doug Hellmann  <doug.hellmann@gmail.com>

	* feedcache/test_server.py (TestHTTPHandler.do_GET): Only check
	the ETag and If-Modified-Since header values if the server is
	configured to apply them.

	* feedcache/test_cache.py: Make all of the tests use the HTTP
	server, and add a few additional checks.

	* feedcache/cache.py (Cache.__getitem__): Only check the age of
	the item in the cache if we have a time-to-live value.

	* setup.py.in: Add requires=['feedparser'].

	* feedcache/cache.py (Cache): Add URL to feedparser.org in docstring.

	* feedcache/__init__.py: Import useful classes directly to the
	package level.

	* feedcache/test_shelvestorage.py (ShelveStorageTest.testRetrieveExistingData):
	Ensure that the shelvestorage is saving modified times.

	* feedcache/test_server.py (TestHTTPHandler.do_GET): Include the
	If-Modified-Since and Last-Modified header handling.

	* feedcache/cache.py (Cache.__getitem__): Only store the newly
	fetched feed data in the cache storage if the status code is not
	304 and there was no error.

	* test_server.py (TestHTTPServer): HTTP server for tests.
	(TestHTTPHandler): HTTP request handler for tests.

	* test_cache.py: Set up the logging before anything else.
	(CacheServerTest): New tests that work with an HTTP server to
	check etag handling in the cache.

	* memorystorage.py (MemoryStorage.getModifiedTime): Change getAge
	to getModifiedTime.

	* cache.py (Cache.__getitem__): Change getAge to getModifiedTime.
	(Cache): Add debugging.

